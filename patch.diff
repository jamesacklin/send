From d2dac83ebeb7000530ef76a54d4dc23d5e0fb7a5 Mon Sep 17 00:00:00 2001
From: James Acklin <james.acklin@gmail.com>
Date: Sat, 7 Sep 2019 10:51:26 -0400
Subject: [PATCH] adding dirtfest external link, still figuring out styles

---
 app/components/Navigation/HorizontalNav.vue |  3 +-
 app/components/Navigation/NavDrawer.vue     |  1 +
 app/components/Navigation/NavItem.vue       | 36 +++++++++++++++++++--
 app/store/index.js                          |  7 +++-
 4 files changed, 42 insertions(+), 5 deletions(-)

diff --git a/app/components/Navigation/HorizontalNav.vue b/app/components/Navigation/HorizontalNav.vue
index 4cc4590..7c31fc4 100644
--- a/app/components/Navigation/HorizontalNav.vue
+++ b/app/components/Navigation/HorizontalNav.vue
@@ -6,6 +6,7 @@
         :key="navLink.index"
         :text="navLink.name"
         :link="navLink.href"
+        :color="navLink.color"
       />
       <div class="search-component">
         <Search />
@@ -60,7 +61,7 @@ nav {
     flex-wrap: wrap;
     padding-left: 1rem;
     > div {
-      width: 25%;
+      width: 33%;
     }
     .search-component {
       align-self: flex-end;
diff --git a/app/components/Navigation/NavDrawer.vue b/app/components/Navigation/NavDrawer.vue
index 9547001..bd20f57 100644
--- a/app/components/Navigation/NavDrawer.vue
+++ b/app/components/Navigation/NavDrawer.vue
@@ -14,6 +14,7 @@
           :key="navLink.index"
           :text="navLink.name"
           :link="navLink.href"
+          :color="navLink.color"
         />
       </nav>
       <div class="nav-drawer-footer">
diff --git a/app/components/Navigation/NavItem.vue b/app/components/Navigation/NavItem.vue
index fdd43cf..09c854e 100644
--- a/app/components/Navigation/NavItem.vue
+++ b/app/components/Navigation/NavItem.vue
@@ -1,14 +1,44 @@
 <template lang="html">
   <div>
-    <nuxt-link v-if="!isUrl(link)" :to="link" tag="a" class="nav-item"> {{ text }} </nuxt-link>
-    <a v-if="isUrl(link)" :href="link" class="nav-item nav-item-external">{{ text }}</a>
+    <nuxt-link 
+      v-if="!isUrl(link)" 
+      :to="link" 
+      tag="a" 
+      class="nav-item"
+    >
+      {{ text }}
+    </nuxt-link>
+    <a 
+      v-if="isUrl(link)" 
+      :href="link" 
+      target="_blank" 
+      class="nav-item nav-item-external"
+      :style="linkColor"
+    >
+      {{ text }}
+    </a>
   </div>
 </template>
 
 <script>
 export default {
   name: 'navItem',
-  props: ['text', 'link'],
+  props: ['text', 'link', 'color'],
+  computed: {
+    linkColor() {
+      if (this.color) {
+        // FIXME: obviously this does not work
+        return `
+        background: ${this.color};
+        @media (min-width: 800px){
+          background: transparent;
+          color: ${this.color};
+        }`
+      } else {
+        return ``
+      }
+    }
+  },
   methods: {
     isUrl(link) {
       let pattern = /^((http|https|ftp):\/\/)/
diff --git a/app/store/index.js b/app/store/index.js
index 0cc2da1..d71fe06 100644
--- a/app/store/index.js
+++ b/app/store/index.js
@@ -53,12 +53,17 @@ export const state = () => ({
     },
     {
       name: 'Store',
-      href: 'https://dirtragmag.threadless.com/'
+      href: 'https://rotatingmassmedia.wixsite.com/dirtragstore'
     },
     {
       name: 'Subscribe',
       href:
         'https://w1.buysub.com/pubs/RG/DRM/DRM_subpage_print_dig.jsp?cds_page_id=164525'
+    },
+    {
+      name: 'Dirt Fest',
+      href: 'https://www.google.com',
+      color: "rgb(120, 44, 131)"
     }
   ],
   // TODO: Control footerLinks from WordPress
-- 
2.20.1

From 6c11bb551652180d11fc29d47c1ba24d3f363ddf Mon Sep 17 00:00:00 2001
From: James Acklin <james.acklin@gmail.com>
Date: Sat, 7 Sep 2019 15:22:42 -0400
Subject: [PATCH] nav changes

---
 app/components/Navigation/HorizontalNav.vue   | 18 ++++-----
 app/components/Navigation/NavDrawer.vue       | 25 ++----------
 app/components/Navigation/NavItem.vue         | 39 +++++++++++++------
 app/components/Navigation/NavLogo.vue         |  2 +-
 .../PageComponents/SectionHeader.vue          |  6 +--
 app/components/Search.vue                     |  2 +-
 app/store/index.js                            | 10 +++--
 7 files changed, 49 insertions(+), 53 deletions(-)

diff --git a/app/components/Navigation/HorizontalNav.vue b/app/components/Navigation/HorizontalNav.vue
index 7c31fc4..673734d 100644
--- a/app/components/Navigation/HorizontalNav.vue
+++ b/app/components/Navigation/HorizontalNav.vue
@@ -40,7 +40,7 @@ export default {
 .horizontal-nav {
   flex-grow: 1;
   display: none;
-  @media (min-width: 800px) {
+  @media (min-width: 945px) {
     display: block;
   }
 }
@@ -49,33 +49,31 @@ export default {
   min-width: 23em;
   width: 0;
   margin: 0;
-  font-size: 70%
+  font-size: 66%
 }
 
 nav {
   display: flex;
   flex-direction: row;
-  justify-content: space-between;
+  justify-content: space-around;
   align-items: center;
-  @media (min-width: 800px) {
+  @media (min-width: 945px) {
     flex-wrap: wrap;
-    padding-left: 1rem;
     > div {
-      width: 33%;
+      width: auto;
     }
     .search-component {
       align-self: flex-end;
+      padding: 0 1em;
       width: 100% !important;
       margin-top: 1em !important;
     }
   }
-  @media (min-width: 1150px) {
+  @media (min-width: 1200px) {
     flex-wrap: nowrap;
-    > div {
-      width: auto;
-    }
     .search-component {
       align-self: flex-end;
+      padding: 0;
       width: auto !important;
       margin-top: 0 !important;
     }
diff --git a/app/components/Navigation/NavDrawer.vue b/app/components/Navigation/NavDrawer.vue
index bd20f57..cf5e1e5 100644
--- a/app/components/Navigation/NavDrawer.vue
+++ b/app/components/Navigation/NavDrawer.vue
@@ -86,6 +86,9 @@ export default {
   opacity: 1;
   top: 0;
   left: 0;
+  @media (min-width: 945px){
+    visibility: hidden;
+  }
 }
 
 .nav-drawer {
@@ -110,28 +113,6 @@ export default {
   width: 50%;
 }
 
-.nav-drawer nav .nav-item {
-  display: block;
-  background: #eb181d;
-  width: 100%;
-  color: #f5f3ef;
-  text-align: center;
-  padding: 2vh;
-  cursor: pointer;
-  text-decoration: none;
-  margin-bottom: 0.25em;
-  @media (min-width: 1000px) {
-    font-size: 1.5rem;
-  }
-  &:hover {
-    color: #292724;
-    background: #f5f3ef;
-  }
-  &.nav-item-external {
-    background: rgb(14, 121, 193);
-  }
-}
-
 .nav-drawer-header {
   margin: 1rem 0 0;
   display: flex;
diff --git a/app/components/Navigation/NavItem.vue b/app/components/Navigation/NavItem.vue
index 09c854e..054f2a6 100644
--- a/app/components/Navigation/NavItem.vue
+++ b/app/components/Navigation/NavItem.vue
@@ -1,5 +1,5 @@
 <template lang="html">
-  <div>
+  <div :style="cssProps">
     <nuxt-link 
       v-if="!isUrl(link)" 
       :to="link" 
@@ -13,7 +13,6 @@
       :href="link" 
       target="_blank" 
       class="nav-item nav-item-external"
-      :style="linkColor"
     >
       {{ text }}
     </a>
@@ -25,17 +24,11 @@ export default {
   name: 'navItem',
   props: ['text', 'link', 'color'],
   computed: {
-    linkColor() {
+    cssProps() {
       if (this.color) {
-        // FIXME: obviously this does not work
-        return `
-        background: ${this.color};
-        @media (min-width: 800px){
-          background: transparent;
-          color: ${this.color};
-        }`
+        return {'--link-color': this.color}
       } else {
-        return ``
+        return {'--link-color': '#eb181d'}
       }
     }
   },
@@ -54,13 +47,35 @@ export default {
 
 <style lang="scss">
 .nav-item {
+  display: block;
+  width: 100%;
+  text-align: center;
+  text-decoration: none;
+  margin-bottom: 0.25em;
+  padding: 2vh;
   font-family: 'Libre Franklin', sans-serif;
-  color: white;
   font-weight: 900;
   font-size: 1.2rem;
   text-decoration: none;
+  background: var(--link-color);
+  color: white;
+  cursor: pointer;
   &:hover {
+    background: white;
     color: #eb181d;
   }
+  @media (min-width: 945px){
+    margin-bottom: 0;
+    padding: 0 0.25em;
+    // text-align: left;
+    background: transparent;
+    &.nav-item-external {
+      color: var(--link-color);
+    }
+    &:hover {
+      background: var(--link-color);
+      color: white;
+    }
+  }
 }
 </style>
diff --git a/app/components/Navigation/NavLogo.vue b/app/components/Navigation/NavLogo.vue
index 5ebd32b..1427542 100644
--- a/app/components/Navigation/NavLogo.vue
+++ b/app/components/Navigation/NavLogo.vue
@@ -59,7 +59,7 @@ export default {
   padding: 0 0.33em;
   margin: 0;
   cursor: pointer;
-  @media (min-width: 800px) {
+  @media (min-width: 945px) {
     display: none;
   }
 }
diff --git a/app/components/PageComponents/SectionHeader.vue b/app/components/PageComponents/SectionHeader.vue
index 2feee33..5b7895d 100644
--- a/app/components/PageComponents/SectionHeader.vue
+++ b/app/components/PageComponents/SectionHeader.vue
@@ -108,9 +108,9 @@ export default {
     }
   }
   /* Padding for sticky nav */
-  margin-top: 76.828px;
-  @media (min-width: 800px){
-    margin-top: 108.781px;
+  margin-top: 64px;
+  @media (min-width: 945px){
+    margin-top: 82px;
   }
   @media (min-width: 1150px){
     margin-top: 67.156px;
diff --git a/app/components/Search.vue b/app/components/Search.vue
index d756d73..7c3468a 100644
--- a/app/components/Search.vue
+++ b/app/components/Search.vue
@@ -5,7 +5,7 @@
       type="text"
       tabindex="0"
       placeholder="Type your search term, press Enter to search."
-      v-model="this.searchTerm"
+      v-model="searchTerm"
     >
   </form>
 </template>
diff --git a/app/store/index.js b/app/store/index.js
index d71fe06..01268d5 100644
--- a/app/store/index.js
+++ b/app/store/index.js
@@ -53,17 +53,19 @@ export const state = () => ({
     },
     {
       name: 'Store',
-      href: 'https://rotatingmassmedia.wixsite.com/dirtragstore'
+      href: 'https://rotatingmassmedia.wixsite.com/dirtragstore',
+      color: "rgb(14, 121, 193)"
     },
     {
       name: 'Subscribe',
       href:
-        'https://w1.buysub.com/pubs/RG/DRM/DRM_subpage_print_dig.jsp?cds_page_id=164525'
+        'https://w1.buysub.com/pubs/RG/DRM/DRM_subpage_print_dig.jsp?cds_page_id=164525',
+      color: "rgb(14, 121, 193)"
     },
     {
       name: 'Dirt Fest',
-      href: 'https://www.google.com',
-      color: "rgb(120, 44, 131)"
+      href: 'https://www.dirtragdirtfest.com',
+      color: "rgb(190, 102, 204)"
     }
   ],
   // TODO: Control footerLinks from WordPress
-- 
2.20.1

